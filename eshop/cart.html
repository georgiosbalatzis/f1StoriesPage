<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - F1 Gear</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'racing-green': '#003B2B',     // Primary background
            'metallic-silver': '#B0B0B0',  // Text, clean look
            'gold-accent': '#CBA135',      // Luxury accents
            'carbon-gray': '#2F2F2F',      // Secondary sections
            'racing-white': '#FAFAFA',     // Product cards, highlights
            'racing-red': '#D50000',       // For error states and alerts
            'racing-black': '#121212',     // Deep background for dark mode
            'asphalt-gray': '#4A4A4A',     // Text on light backgrounds
            'champagne-gold': '#F8E9A1',   // Lighter gold variant
            'pit-lane-gray': '#6A6A6A'     // Mid-tone gray for subtle elements
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="style.css" rel="stylesheet">
  <link href="f1-styles.css" rel="stylesheet">
</head>
<body>
<div class="streak"></div>
<div class="streak"></div>
<div class="streak"></div>
<div class="streak"></div>

<header class="bg-racing-green text-racing-white p-4 flex justify-between items-center sticky top-0 z-50">
  <div class="logo">
    <a href="index.html" class="text-2xl font-bold text-gold-accent">F1 GEAR</a>
  </div>
  <nav class="flex space-x-4 items-center">
    <a href="index.html" class="hover:text-gold-accent transition-all">Home</a>
    <a href="https://f1stories.gr/#about" class="hover:text-gold-accent transition-all">About</a>
    <a href="https://f1stories.gr/#contact" class="hover:text-gold-accent transition-all">Contact</a>
    <a href="wishlist.html" class="hover:text-gold-accent relative transition-all">
      <i class="fas fa-heart"></i>
      <span
              id="wishlist-count"
              class="absolute -top-2 -right-2 bg-racing-red text-racing-white text-xs rounded-full px-2 py-1 hidden"
      >
        0
      </span>
    </a>
    <a href="cart.html" class="hover:text-gold-accent relative transition-all">
      <i class="fas fa-shopping-cart"></i>
      <span
              id="cart-count"
              class="cart-count absolute -top-2 -right-2 bg-racing-red text-racing-white text-xs rounded-full px-2 py-1 hidden"
      >
        0
      </span>
    </a>
    <button id="darkModeToggle" class="hover:text-gold-accent transition-all p-1 rounded-full">
      <i class="fas fa-moon"></i>
    </button>
  </nav>
</header>

<!-- Racing stripe accent -->
<div class="racing-stripe"></div>

<!-- Main content wrapper for fixed footer -->
<div id="main-content">
  <div class="container mx-auto mt-8 p-4 fade-in">
    <h1 class="text-3xl font-bold mb-6 text-racing-green">Your Cart</h1>

    <div id="cartItems" class="space-y-4 mb-8">
      <!-- Cart items will be dynamically inserted here -->
    </div>

    <div class="bg-carbon-gray p-6 rounded-lg shadow-lg border-t-4 border-gold-accent">
      <div class="flex justify-between mb-4">
        <span class="text-racing-white text-xl">Total:</span>
        <span id="cartTotal" class="text-gold-accent text-2xl font-bold">$0.00</span>
      </div>
      <button
              id="checkoutBtn"
              class="w-full bg-racing-green text-racing-white py-3 rounded hover:bg-gold-accent transition-colors duration-300 font-medium relative overflow-hidden"
      >
        <span class="relative z-10">Proceed to Checkout</span>
        <span class="absolute inset-0 bg-gold-accent transform scale-x-0 origin-left transition-transform duration-300"></span>
      </button>
    </div>
  </div>
</div>

<footer class="bg-racing-green text-racing-white mt-8 py-8">
  <div class="racing-stripe mb-8"></div>
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div>
        <h3 class="text-gold-accent text-xl font-bold mb-4">F1 GEAR</h3>
        <p class="text-metallic-silver">Premium racing merchandise for the true Formula 1 enthusiast. Get the latest gear from your favorite teams and drivers.</p>
      </div>
      <div>
        <h3 class="text-gold-accent text-xl font-bold mb-4">Quick Links</h3>
        <ul class="space-y-2">
          <li><a href="index.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Home</a></li>
          <li><a href="https://f1stories.gr" class="text-metallic-silver hover:text-gold-accent transition-colors">F1 Stories</a></li>
          <li><a href="https://f1stories.gr/#about" class="text-metallic-silver hover:text-gold-accent transition-colors">About</a></li>
          <li><a href="https://f1stories.gr/#contact" class="text-metallic-silver hover:text-gold-accent transition-colors">Contact</a></li>
          <li><a href="cart.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Cart</a></li>
          <li><a href="wishlist.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Wishlist</a></li>
        </ul>
      </div>
      <div>
        <h3 class="text-gold-accent text-xl font-bold mb-4">Connect With Us</h3>
        <div class="social-icons">
          <a href="https://www.youtube.com/@F1_Stories_Original" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-youtube" aria-label="YouTube">
            <i class="fab fa-youtube"></i>
          </a>
          <a href="https://www.facebook.com/f1storiess" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-facebook" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/myf1stories/" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-instagram" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://www.tiktok.com/@f1stories6" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-tiktok" aria-label="TikTok">
            <i class="fab fa-tiktok"></i>
          </a>
          <a href="mailto:myf1stories@gmail.com" class="text-metallic-silver hover:text-gold-accent transition-colors social-email" aria-label="Email">
            <i class="fas fa-envelope"></i>
          </a>
          <a href="https://open.spotify.com/show/0qC80ahDY824BME9FtxryS?si=bae4f48cf1ee4ded" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-spotify" aria-label="Spotify">
            <i class="fab fa-spotify"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="mt-8 pt-8 border-t border-pit-lane-gray text-center text-metallic-silver">
      <p>&copy; 2025 F1 GEAR. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- Back to top button -->
<button id="back-to-top" class="back-to-top-btn">
  <i class="fas fa-chevron-up"></i>
</button>

<!-- Mobile Navigation for Small Screens -->
<div class="mobile-menu-wrapper hidden md:hidden">
  <nav class="mobile-nav">
    <a href="index.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2">
      <i class="fas fa-home"></i>
      <span class="text-xs mt-1">Home</span>
    </a>
    <a href="cart.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2 relative">
      <i class="fas fa-shopping-cart"></i>
      <span class="text-xs mt-1">Cart</span>
      <span class="cart-count absolute -top-1 -right-1 bg-racing-red text-racing-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
    </a>
    <a href="wishlist.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2 relative">
      <i class="fas fa-heart"></i>
      <span class="text-xs mt-1">Wishlist</span>
      <span id="mobile-wishlist-count" class="absolute -top-1 -right-1 bg-racing-red text-racing-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
    </a>
    <button id="mobileDarkModeToggle" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2">
      <i class="fas fa-moon"></i>
      <span class="text-xs mt-1">Theme</span>
    </button>
  </nav>
</div>

<!-- Notification Container -->
<div id="notification-container" class="fixed top-4 right-4 z-50"></div>

<script>
  // Cart Management Functions
  function renderCart() {
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalElement = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');

    // Get cart from localStorage
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Clear previous items
    cartItemsContainer.innerHTML = '';

    // Check if cart is empty
    if (cart.length === 0) {
      cartItemsContainer.innerHTML = `
        <div class="text-center py-12 fade-in">
          <i class="fas fa-shopping-cart text-pit-lane-gray text-6xl mb-4"></i>
          <h2 class="text-2xl font-bold text-racing-green mb-2">Your cart is empty</h2>
          <p class="text-asphalt-gray mb-6">Looks like you haven't added any items yet.</p>
          <a href="index.html" class="cta-button">
            Discover F1 Gear
          </a>
        </div>
      `;

      // Update total
      cartTotalElement.textContent = '$0.00';

      // Disable checkout button
      checkoutBtn.disabled = true;
      checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed');

      return;
    }

    // Render cart items
    let total = 0;
    cart.forEach((item, index) => {
      const cartItemElement = document.createElement('div');
      cartItemElement.className = `
        cart-item
        bg-racing-white
        p-4
        rounded-lg
        flex
        justify-between
        items-center
        shadow-md
        border-l-4
        border-racing-green
        fade-in
      `;

      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      cartItemElement.innerHTML = `
        <div class="flex items-center space-x-4">
          <img src="${item.imageUrl}" alt="${item.name}" class="w-16 h-16 object-cover rounded border border-gold-accent">
          <div>
            <h3 class="text-racing-green font-bold">${item.name}</h3>
            <p class="text-gold-accent">
              $${item.price.toFixed(2)} Ã— ${item.quantity}
            </p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-racing-green font-bold">
            $${itemTotal.toFixed(2)}
          </span>
          <button
            onclick="removeFromCart(${index})"
            class="
              bg-racing-green
              text-racing-white
              px-3
              py-1
              rounded
              hover:bg-racing-red
              transition-colors
            "
          >
            <i class="fas fa-trash-alt mr-1"></i> Remove
          </button>
        </div>
      `;

      cartItemsContainer.appendChild(cartItemElement);
    });

    // Update total
    cartTotalElement.textContent = `$${total.toFixed(2)}`;

    // Toggle checkout button state
    checkoutBtn.disabled = cart.length === 0;
    checkoutBtn.classList.toggle('opacity-50', cart.length === 0);
    checkoutBtn.classList.toggle('cursor-not-allowed', cart.length === 0);

    // Initialize fade-in animation
    const fadeElements = document.querySelectorAll('.fade-in');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1
    });

    fadeElements.forEach(element => {
      observer.observe(element);
    });
  }

  function removeFromCart(index) {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Save product info before removing for notification
    const removedProduct = cart[index];

    // Remove item
    cart.splice(index, 1);

    // Update localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update UI
    renderCart();

    // Update global cart counter
    updateCartCounter();

    // Show notification
    showNotification(`Removed ${removedProduct.name} from cart`, 'info');
  }

  function updateCartCounter() {
    // Get all cart count elements across pages
    const cartCountEls = document.querySelectorAll('.cart-count');

    // Get cart from localStorage
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Calculate total items in cart
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

    // Update all cart count elements
    cartCountEls.forEach(el => {
      el.textContent = totalItems;

      // Show/hide based on count
      if (totalItems > 0) {
        el.classList.remove('hidden');

        // Optionally add a quick animation to draw attention
        el.classList.add('cart-pulse');
        setTimeout(() => {
          el.classList.remove('cart-pulse');
        }, 300);
      } else {
        el.classList.add('hidden');
      }
    });
  }

  function updateWishlistCounter() {
    // Get wishlist from localStorage
    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
    const wishlistCountEls = document.querySelectorAll('#wishlist-count, #mobile-wishlist-count');

    wishlistCountEls.forEach(el => {
      el.textContent = wishlist.length;
      if (wishlist.length > 0) {
        el.classList.remove('hidden');
      } else {
        el.classList.add('hidden');
      }
    });
  }

  // Enhanced notification system
  function showNotification(message, type = 'info') {
    const container = document.getElementById('notification-container') || createNotificationContainer();

    const notification = document.createElement('div');
    notification.className = `notification ${type}`;

    let icon = '';
    switch(type) {
      case 'success':
        icon = '<i class="fas fa-check-circle"></i>';
        break;
      case 'error':
        icon = '<i class="fas fa-exclamation-circle"></i>';
        break;
      default:
        icon = '<i class="fas fa-info-circle"></i>';
    }

    notification.innerHTML = `
      <div class="flex items-center">
        ${icon}
        <span class="ml-2">${message}</span>
      </div>
      <button class="ml-4 text-sm hover:text-gold-accent" onclick="this.parentNode.remove()">
        <i class="fas fa-times"></i>
      </button>
    `;

    container.appendChild(notification);

    // Animate in
    setTimeout(() => {
      notification.classList.add('show');
    }, 10);

    // Auto remove after 3 seconds
    setTimeout(() => {
      notification.classList.remove('show');
      setTimeout(() => {
        notification.remove();
      }, 300);
    }, 3000);
  }

  // Create notification container if it doesn't exist
  function createNotificationContainer() {
    const container = document.createElement('div');
    container.id = 'notification-container';
    container.className = 'fixed top-4 right-4 z-50';
    document.body.appendChild(container);
    return container;
  }

  // Initialize Dark Mode
  function initDarkMode() {
    const darkModeToggle = document.getElementById('darkModeToggle');
    const mobileDarkModeToggle = document.getElementById('mobileDarkModeToggle');
    const body = document.body;

    // Check initial dark mode state
    if (localStorage.getItem('darkMode') === 'true') {
      body.classList.add('dark');
      darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      if (mobileDarkModeToggle) {
        mobileDarkModeToggle.querySelector('i').className = 'fas fa-sun';
      }
    }

    darkModeToggle.addEventListener('click', () => {
      body.classList.toggle('dark');
      const isDark = body.classList.contains('dark');
      localStorage.setItem('darkMode', isDark);
      darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
      if (mobileDarkModeToggle) {
        mobileDarkModeToggle.querySelector('i').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
      }
    });

    if (mobileDarkModeToggle) {
      mobileDarkModeToggle.addEventListener('click', () => {
        body.classList.toggle('dark');
        const isDark = body.classList.contains('dark');
        localStorage.setItem('darkMode', isDark);
        darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        mobileDarkModeToggle.querySelector('i').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
      });
    }
  }

  // Initialize Back to Top Button
  function initBackToTop() {
    const backToTopBtn = document.getElementById('back-to-top');

    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    });

    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  }

  // Checkout button functionality
  document.getElementById('checkoutBtn').addEventListener('click', () => {
    window.location.href = 'checkout.html';
  });

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', () => {
    renderCart();
    updateCartCounter();
    updateWishlistCounter();
    initDarkMode();
    initBackToTop();

    // Add hover effect to checkout button
    const checkoutBtn = document.getElementById('checkoutBtn');
    checkoutBtn.addEventListener('mouseenter', () => {
      checkoutBtn.querySelector('span.absolute').style.transform = 'scaleX(1)';
    });
    checkoutBtn.addEventListener('mouseleave', () => {
      checkoutBtn.querySelector('span.absolute').style.transform = 'scaleX(0)';
    });
  });
</script>

<script src="mobile-optimizations.js"></script>
<script src="f1-scripts.js"></script>
</body>
</html>