<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - F1 Gear</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'racing-green': '#003B2B',     // Primary background
                        'metallic-silver': '#B0B0B0',  // Text, clean look
                        'gold-accent': '#CBA135',      // Luxury accents
                        'carbon-gray': '#2F2F2F',      // Secondary sections
                        'racing-white': '#FAFAFA',     // Product cards, highlights
                        'racing-red': '#D50000',       // For error states and alerts
                        'racing-black': '#121212',     // Deep background for dark mode
                        'asphalt-gray': '#4A4A4A',     // Text on light backgrounds
                        'champagne-gold': '#F8E9A1',   // Lighter gold variant
                        'pit-lane-gray': '#6A6A6A'     // Mid-tone gray for subtle elements
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="style.css" rel="stylesheet">
    <link href="f1-styles.css" rel="stylesheet">
</head>
<body>
<div class="streak"></div>
<div class="streak"></div>
<div class="streak"></div>
<div class="streak"></div>

<header class="bg-racing-green text-racing-white p-4 flex justify-between items-center sticky top-0 z-50">
    <div class="logo">
        <a href="index.html" class="text-2xl font-bold text-gold-accent">F1 GEAR</a>
    </div>
    <nav class="flex space-x-4 items-center">
        <a href="index.html" class="hover:text-gold-accent transition-all">Home</a>
        <a href="https://f1stories.gr/#about" class="hover:text-gold-accent transition-all">About</a>
        <a href="https://f1stories.gr/#contact" class="hover:text-gold-accent transition-all">Contact</a>
        <a href="wishlist.html" class="hover:text-gold-accent relative transition-all">
            <i class="fas fa-heart"></i>
            <span
                    id="wishlist-count"
                    class="absolute -top-2 -right-2 bg-racing-red text-racing-white text-xs rounded-full px-2 py-1 hidden"
            >
                0
            </span>
        </a>
        <a href="cart.html" class="hover:text-gold-accent relative transition-all">
            <i class="fas fa-shopping-cart"></i>
            <span
                    id="cart-count"
                    class="cart-count absolute -top-2 -right-2 bg-racing-red text-racing-white text-xs rounded-full px-2 py-1 hidden"
            >
                0
            </span>
        </a>
        <button id="darkModeToggle" class="hover:text-gold-accent transition-all p-1 rounded-full">
            <i class="fas fa-moon"></i>
        </button>
    </nav>
</header>

<!-- Racing stripe accent -->
<div class="racing-stripe"></div>

<!-- Main content wrapper for fixed footer -->
<div id="main-content">
    <div class="container mx-auto mt-8 p-4">
        <!-- Product Details Container -->
        <div id="product-details" class="product-details grid md:grid-cols-2 gap-8 fade-in">
            <!-- Product Image -->
            <div class="relative bg-racing-white rounded-lg overflow-hidden shadow-lg border border-pit-lane-gray">
                <img
                        id="product-image"
                        src=""
                        alt="Product Image"
                        class="product-img w-full object-cover max-h-96 transition-all duration-500"
                >
                <div class="absolute top-0 left-0 w-full h-1 bg-racing-green"></div>
                <div class="absolute top-4 left-4">
                    <span
                            id="product-category"
                            class="bg-racing-green text-racing-white px-3 py-1 rounded-full text-sm font-medium"
                    ></span>
                </div>
            </div>

            <!-- Product Information -->
            <div class="bg-racing-white p-6 rounded-lg shadow-lg border border-pit-lane-gray">
                <div class="mb-4 pb-4 border-b border-pit-lane-gray border-opacity-20">
                    <h1
                            id="product-name"
                            class="text-3xl font-bold text-racing-green mb-2 relative inline-block"
                    ></h1>
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p
                                    id="product-description"
                                    class="text-asphalt-gray"
                            ></p>
                        </div>
                    </div>
                </div>

                <div class="mb-6 grid grid-cols-3 gap-4">
                    <div class="bg-carbon-gray bg-opacity-5 p-3 rounded transition-all duration-300 hover:bg-carbon-gray hover:bg-opacity-10">
                        <label class="block text-racing-green font-medium mb-1 text-sm">Material</label>
                        <p
                                id="product-material"
                                class="text-asphalt-gray font-medium"
                        ></p>
                    </div>
                    <div class="bg-carbon-gray bg-opacity-5 p-3 rounded transition-all duration-300 hover:bg-carbon-gray hover:bg-opacity-10">
                        <label class="block text-racing-green font-medium mb-1 text-sm">Color</label>
                        <p
                                id="product-color"
                                class="text-asphalt-gray font-medium"
                        ></p>
                    </div>
                    <div class="bg-carbon-gray bg-opacity-5 p-3 rounded transition-all duration-300 hover:bg-carbon-gray hover:bg-opacity-10">
                        <label class="block text-racing-green font-medium mb-1 text-sm">Size</label>
                        <p
                                id="product-size"
                                class="text-asphalt-gray font-medium"
                        ></p>
                    </div>
                </div>

                <div class="flex items-center mb-6 pb-6 border-b border-pit-lane-gray border-opacity-20">
                    <span
                            id="product-price"
                            class="text-4xl font-bold text-gold-accent mr-4 transition-all duration-300 hover:scale-110"
                    ></span>
                    <button
                            id="wishlist-toggle"
                            class="ml-auto text-pit-lane-gray hover:text-racing-red transition-all duration-300 hover:scale-110"
                            data-product-id=""
                    >
                        <i class="fas fa-heart fa-2x"></i>
                    </button>
                </div>

                <div class="space-y-4">
                    <div class="flex space-x-4">
                        <div class="flex-1">
                            <label class="block text-racing-green font-medium mb-2">Quantity</label>
                            <div class="quantity-input flex border border-pit-lane-gray rounded-md">
                                <button id="quantity-decrease" class="px-3 py-2 text-racing-green hover:bg-carbon-gray hover:bg-opacity-10">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <input type="number" id="quantity" min="1" value="1" class="w-12 text-center border-x border-pit-lane-gray focus:outline-none text-asphalt-gray" />
                                <button id="quantity-increase" class="px-3 py-2 text-racing-green hover:bg-carbon-gray hover:bg-opacity-10">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex space-x-4">
                        <button
                                id="add-to-cart"
                                class="flex-grow bg-racing-green text-racing-white py-3 rounded hover:bg-gold-accent transition-colors duration-300 font-medium relative overflow-hidden"
                        >
                            <span class="relative z-10">Add to Cart</span>
                            <span class="absolute inset-0 bg-gold-accent transform scale-x-0 origin-left transition-transform duration-300"></span>
                        </button>
                        <button
                                id="buy-now"
                                class="flex-grow bg-carbon-gray text-racing-white py-3 rounded hover:bg-pit-lane-gray transition-colors duration-300 font-medium relative overflow-hidden"
                        >
                            <span class="relative z-10">Buy Now</span>
                            <span class="absolute inset-0 bg-pit-lane-gray transform scale-x-0 origin-left transition-transform duration-300"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Details Tab Section -->
        <div class="mt-12 fade-in">
            <div class="flex border-b border-pit-lane-gray">
                <button class="tab-btn active py-3 px-6 font-medium text-racing-green border-b-2 border-racing-green relative -bottom-px" data-tab="description">Description</button>
                <button class="tab-btn py-3 px-6 font-medium text-pit-lane-gray hover:text-racing-green transition-colors" data-tab="specifications">Specifications</button>
                <button class="tab-btn py-3 px-6 font-medium text-pit-lane-gray hover:text-racing-green transition-colors" data-tab="shipping">Shipping & Returns</button>
            </div>

            <div class="tab-content p-6 bg-racing-white rounded-b-lg shadow-lg">
                <div id="description-tab" class="tab-pane active">
                    <h3 class="text-xl font-bold text-racing-green mb-4">Product Description</h3>
                    <p id="full-description" class="text-asphalt-gray leading-relaxed"></p>
                </div>
                <div id="specifications-tab" class="tab-pane hidden">
                    <h3 class="text-xl font-bold text-racing-green mb-4">Product Specifications</h3>
                    <div class="grid grid-cols-2 gap-y-4 text-asphalt-gray">
                        <div>
                            <span class="font-medium text-racing-green">Material:</span>
                            <span id="specs-material"></span>
                        </div>
                        <div>
                            <span class="font-medium text-racing-green">Color:</span>
                            <span id="specs-color"></span>
                        </div>
                        <div>
                            <span class="font-medium text-racing-green">Size:</span>
                            <span id="specs-size"></span>
                        </div>
                        <div>
                            <span class="font-medium text-racing-green">Category:</span>
                            <span id="specs-category"></span>
                        </div>
                    </div>
                </div>
                <div id="shipping-tab" class="tab-pane hidden">
                    <h3 class="text-xl font-bold text-racing-green mb-4">Shipping & Returns</h3>
                    <div class="space-y-4 text-asphalt-gray">
                        <div class="p-4 border border-pit-lane-gray border-opacity-20 rounded-lg transition-all duration-300 hover:border-racing-green hover:bg-carbon-gray hover:bg-opacity-5">
                            <p class="flex items-center"><i class="fas fa-truck text-racing-green mr-2"></i> <span class="font-medium text-racing-green">Standard Shipping:</span> 3-5 business days</p>
                        </div>
                        <div class="p-4 border border-pit-lane-gray border-opacity-20 rounded-lg transition-all duration-300 hover:border-racing-green hover:bg-carbon-gray hover:bg-opacity-5">
                            <p class="flex items-center"><i class="fas fa-shipping-fast text-racing-green mr-2"></i> <span class="font-medium text-racing-green">Express Shipping:</span> 1-2 business days</p>
                        </div>
                        <div class="p-4 border border-pit-lane-gray border-opacity-20 rounded-lg transition-all duration-300 hover:border-racing-green hover:bg-carbon-gray hover:bg-opacity-5">
                            <p class="flex items-center"><i class="fas fa-undo text-racing-green mr-2"></i> <span class="font-medium text-racing-green">Return Policy:</span> Returns accepted within 30 days of purchase for unused items in original packaging.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recently Viewed Section -->
        <div id="recently-viewed-container" class="mt-16 fade-in">
            <!-- Recently viewed items will be dynamically inserted here -->
        </div>

        <!-- Notification Container -->
        <div id="notification-container" class="fixed top-4 right-4 z-50"></div>
    </div>
</div>

<footer class="bg-racing-green text-racing-white mt-8 py-8">
    <div class="racing-stripe mb-8"></div>
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <h3 class="text-gold-accent text-xl font-bold mb-4">F1 GEAR</h3>
                <p class="text-metallic-silver">Premium racing merchandise for the true Formula 1 enthusiast. Get the latest gear from your favorite teams and drivers.</p>
            </div>
            <div>
                <h3 class="text-gold-accent text-xl font-bold mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="index.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Home</a></li>
                    <li><a href="https://f1stories.gr" class="text-metallic-silver hover:text-gold-accent transition-colors">F1 Stories</a></li>
                    <li><a href="https://f1stories.gr/#about" class="text-metallic-silver hover:text-gold-accent transition-colors">About</a></li>
                    <li><a href="https://f1stories.gr/#contact" class="text-metallic-silver hover:text-gold-accent transition-colors">Contact</a></li>
                    <li><a href="cart.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Cart</a></li>
                    <li><a href="wishlist.html" class="text-metallic-silver hover:text-gold-accent transition-colors">Wishlist</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-gold-accent text-xl font-bold mb-4">Connect With Us</h3>
                <div class="social-icons">
                    <a href="https://www.youtube.com/@F1_Stories_Original" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-youtube" aria-label="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://www.facebook.com/f1storiess" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-facebook" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/myf1stories/" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-instagram" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.tiktok.com/@f1stories6" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-tiktok" aria-label="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="mailto:myf1stories@gmail.com" class="text-metallic-silver hover:text-gold-accent transition-colors social-email" aria-label="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    <a href="https://open.spotify.com/show/0qC80ahDY824BME9FtxryS?si=bae4f48cf1ee4ded" target="_blank" class="text-metallic-silver hover:text-gold-accent transition-colors social-spotify" aria-label="Spotify">
                        <i class="fab fa-spotify"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="mt-8 pt-8 border-t border-pit-lane-gray text-center text-metallic-silver">
            <p>&copy; 2025 F1 GEAR. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Back to top button -->
<button id="back-to-top" class="back-to-top-btn">
    <i class="fas fa-chevron-up"></i>
</button>

<!-- Mobile Navigation for Small Screens -->
<div class="mobile-menu-wrapper hidden md:hidden">
    <nav class="mobile-nav">
        <a href="index.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2">
            <i class="fas fa-home"></i>
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="cart.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2 relative">
            <i class="fas fa-shopping-cart"></i>
            <span class="text-xs mt-1">Cart</span>
            <span class="cart-count absolute -top-1 -right-1 bg-racing-red text-racing-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
        </a>
        <a href="wishlist.html" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2 relative">
            <i class="fas fa-heart"></i>
            <span class="text-xs mt-1">Wishlist</span>
            <span id="mobile-wishlist-count" class="absolute -top-1 -right-1 bg-racing-red text-racing-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
        </a>
        <button id="mobileDarkModeToggle" class="flex flex-col items-center text-racing-white hover:text-gold-accent transition-colors p-2">
            <i class="fas fa-moon"></i>
            <span class="text-xs mt-1">Theme</span>
        </button>
    </nav>
</div>

<script>
    // Get product ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');

    // DOM elements
    const productImage = document.getElementById('product-image');
    const productCategory = document.getElementById('product-category');
    const productName = document.getElementById('product-name');
    const productDescription = document.getElementById('product-description');
    const fullDescription = document.getElementById('full-description');
    const productMaterial = document.getElementById('product-material');
    const productColor = document.getElementById('product-color');
    const productSize = document.getElementById('product-size');
    const productPrice = document.getElementById('product-price');
    const wishlistToggle = document.getElementById('wishlist-toggle');
    const specsCategory = document.getElementById('specs-category');
    const specsMaterial = document.getElementById('specs-material');
    const specsColor = document.getElementById('specs-color');
    const specsSize = document.getElementById('specs-size');
    const quantityInput = document.getElementById('quantity');
    const addToCartBtn = document.getElementById('add-to-cart');
    const buyNowBtn = document.getElementById('buy-now');

    // Load product data
    async function loadProductData() {
        try {
            // In a real scenario, this would fetch from state or API
            // Here we'll simulate by loading all products and finding the one we need
            const products = state?.products || [];

            if (products.length === 0) {
                // If products not loaded yet, try to load them
                if (typeof fetchProducts === 'function') {
                    await fetchProducts();
                }
            }

            const product = state.products.find(p => p.id === productId);

            if (!product) {
                showNotification('Product not found', 'error');
                return;
            }

            // Populate the product details
            document.title = `${product.name} - F1 Gear`;
            productImage.src = product.imageUrl;
            productImage.alt = product.name;
            productCategory.textContent = product.category;
            productName.textContent = product.name;
            productDescription.textContent = product.description;
            fullDescription.textContent = product.description;
            productMaterial.textContent = product.details.material;
            productColor.textContent = product.details.color;
            productSize.textContent = product.details.size;
            productPrice.textContent = `$${product.price.toFixed(2)}`;

            // Update specifications tab
            specsCategory.textContent = product.category;
            specsMaterial.textContent = product.details.material;
            specsColor.textContent = product.details.color;
            specsSize.textContent = product.details.size;

            // Set up wishlist toggle
            wishlistToggle.setAttribute('data-product-id', product.id);
            updateWishlistToggle(product.id);

            // Set up add to cart button
            addToCartBtn.onclick = () => {
                const quantity = parseInt(quantityInput.value, 10);
                addToCartWithQuantity(product.id, quantity);
            };

            // Set up buy now button
            buyNowBtn.onclick = () => {
                const quantity = parseInt(quantityInput.value, 10);
                addToCartWithQuantity(product.id, quantity);
                window.location.href = 'cart.html';
            };

            // Add to recently viewed
            addToRecentlyViewed(product.id);

        } catch (error) {
            console.error('Error loading product:', error);
            showNotification('Failed to load product details', 'error');
        }
    }

    // Update wishlist toggle appearance
    function updateWishlistToggle(productId) {
        const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
        const isInWishlist = wishlist.some(item => item.id === productId);

        if (isInWishlist) {
            wishlistToggle.classList.remove('text-pit-lane-gray');
            wishlistToggle.classList.add('text-racing-red');
        } else {
            wishlistToggle.classList.add('text-pit-lane-gray');
            wishlistToggle.classList.remove('text-racing-red');
        }

        // Set up click event
        wishlistToggle.onclick = () => {
            toggleWishlist(productId);
            updateWishlistToggle(productId);
        };
    }

    // Set up quantity buttons
    document.getElementById('quantity-decrease').addEventListener('click', () => {
        const currentValue = parseInt(quantityInput.value, 10);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
        }
    });

    document.getElementById('quantity-increase').addEventListener('click', () => {
        const currentValue = parseInt(quantityInput.value, 10);
        quantityInput.value = currentValue + 1;
    });

    // Ensure quantity is at least 1
    quantityInput.addEventListener('change', () => {
        if (quantityInput.value < 1 || !quantityInput.value) {
            quantityInput.value = 1;
        }
    });

    // Tab functionality
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // Remove active class from all buttons and hide all panes
            tabBtns.forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-pane').forEach(p => p.classList.add('hidden'));

            // Add active class to clicked button and show corresponding pane
            btn.classList.add('active');
            const tabId = btn.getAttribute('data-tab');
            document.getElementById(`${tabId}-tab`).classList.remove('hidden');
        });
    });

    // Enhanced notification system
    function showNotification(message, type = 'info') {
        const container = document.getElementById('notification-container') || createNotificationContainer();

        const notification = document.createElement('div');
        notification.className = `notification ${type}`;

        let icon = '';
        switch(type) {
            case 'success':
                icon = '<i class="fas fa-check-circle"></i>';
                break;
            case 'error':
                icon = '<i class="fas fa-exclamation-circle"></i>';
                break;
            default:
                icon = '<i class="fas fa-info-circle"></i>';
        }

        notification.innerHTML = `
            <div class="flex items-center">
                ${icon}
                <span class="ml-2">${message}</span>
            </div>
            <button class="ml-4 text-sm hover:text-gold-accent" onclick="this.parentNode.remove()">
                <i class="fas fa-times"></i>
            </button>
        `;

        container.appendChild(notification);

        // Animate in
        setTimeout(() => {
            notification.classList.add('show');
        }, 10);

        // Auto remove after 3 seconds
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 3000);
    }

    // Create notification container if it doesn't exist
    function createNotificationContainer() {
        const container = document.createElement('div');
        container.id = 'notification-container';
        container.className = 'fixed top-4 right-4 z-50';
        document.body.appendChild(container);
        return container;
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
        loadProductData();

        // Initialize animations
        const fadeElements = document.querySelectorAll('.fade-in');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.1
        });

        fadeElements.forEach(element => {
            observer.observe(element);
        });

        // Initialize dark mode
        const darkModeToggle = document.getElementById('darkModeToggle');
        const mobileDarkModeToggle = document.getElementById('mobileDarkModeToggle');
        const body = document.body;

        // Check initial dark mode state
        if (localStorage.getItem('darkMode') === 'true') {
            body.classList.add('dark');
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            if (mobileDarkModeToggle) {
                mobileDarkModeToggle.querySelector('i').className = 'fas fa-sun';
            }
        }

        darkModeToggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            const isDark = body.classList.contains('dark');
            localStorage.setItem('darkMode', isDark);
            darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            if (mobileDarkModeToggle) {
                mobileDarkModeToggle.querySelector('i').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            }
        });

        if (mobileDarkModeToggle) {
            mobileDarkModeToggle.addEventListener('click', () => {
                body.classList.toggle('dark');
                const isDark = body.classList.contains('dark');
                localStorage.setItem('darkMode', isDark);
                darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                mobileDarkModeToggle.querySelector('i').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            });
        }

        // Initialize back to top button
        const backToTopBtn = document.getElementById('back-to-top');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    });
</script>

<script src="mobile-optimizations.js"></script>
<script src="f1-scripts.js"></script>
</body>
</html>