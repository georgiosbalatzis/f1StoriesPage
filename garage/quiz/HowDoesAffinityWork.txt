# Πώς Υπολογίζεται η Συγγένεια Οδηγών και Ομάδων στο F1 Affinity Quiz

## Εισαγωγή

Σε αυτό το έγγραφο, θα εξηγήσουμε με λεπτομέρεια πώς λειτουργεί ο αλγόριθμος που υπολογίζει την "συγγένεια" (affinity) μεταξύ των προτιμήσεών σας και των οδηγών/ομάδων της Formula 1 στο F1 Affinity Quiz. Επίσης, θα αναλύσουμε τη δομή των δεδομένων JSON που χρησιμοποιούνται για αυτούς τους υπολογισμούς.

## Δομή Δεδομένων JSON

Το αρχείο JSON που χρησιμοποιείται στο quiz περιέχει τρία βασικά μέρη:

1. **Ερωτήσεις** (questions): Οι ερωτήσεις που καλείται να απαντήσει ο χρήστης
2. **Ομάδες** (teams): Πληροφορίες για τις ομάδες F1 και τις "συγγένειες" τους
3. **Οδηγοί** (drivers): Πληροφορίες για τους οδηγούς F1 και τις "συγγένειες" τους

Ας δούμε ένα παράδειγμα της δομής:

```json
{
  "questions": [
    {
      "question": "Τι είναι πιο σημαντικό για εσάς στη Formula 1;",
      "options": [
        "Καθαρή ταχύτητα και επιδόσεις",
        "Τεχνική καινοτομία",
        "Αγωνιστική κληρονομιά και παράδοση",
        "Οδηγική ικανότητα και προσπεράσματα"
      ]
    },
    {
      "question": "Ποιο αγωνιστικό στυλ προτιμάτε;",
      "options": [
        "Επιθετικό και τολμηρό",
        "Υπολογισμένο και στρατηγικό",
        "Ομαλό και συνεπές",
        "Προσαρμοστικό σε όλες τις συνθήκες"
      ]
    }
    // ... περισσότερες ερωτήσεις
  ],
  "teams": [
    {
      "name": "Mercedes AMG Petronas",
      "subtitle": "Τα Ασημένια Βέλη",
      "description": "Η Mercedes συνδυάζει τεχνική αριστεία με αποτελεσματικότητα...",
      "image": "https://www.example.com/mercedes-logo.png",
      "affinities": [1, 2, 0, 3, 1, 1, 1, 2, 1, 2]
    },
    {
      "name": "Red Bull Racing",
      "subtitle": "Οι Ταύροι",
      "description": "Η Red Bull ευδοκιμεί στην τόλμη και την επιθετική στρατηγική...",
      "image": "https://www.example.com/redbull-logo.png",
      "affinities": [0, 0, 2, 1, 0, 0, 0, 0, 0, 0]
    }
    // ... περισσότερες ομάδες
  ],
  "drivers": [
    {
      "name": "Lewis Hamilton",
      "subtitle": "7 φορές Παγκόσμιος Πρωταθλητής",
      "description": "Συνδυάζει φυσικό ταλέντο με σχολαστική προετοιμασία...",
      "image": "https://www.example.com/hamilton.png",
      "team": "Ferrari",
      "affinities": [3, 2, 1, 3, 3, 1, 3, 0, 0, 3]
    },
    {
      "name": "Max Verstappen",
      "subtitle": "Ο Ιπτάμενος Ολλανδός",
      "description": "Επιθετικός, άφοβος και εξαιρετικά ταλαντούχος...",
      "image": "https://www.example.com/verstappen.png",
      "team": "Red Bull Racing",
      "affinities": [0, 0, 2, 1, 0, 0, 3, 0, 0, 1]
    }
    // ... περισσότεροι οδηγοί
  ]
}
```

## Πώς Λειτουργούν οι Συγγένειες (Affinities)

Το πιο σημαντικό στοιχείο για τον υπολογισμό των αποτελεσμάτων είναι ο πίνακας "affinities" που υπάρχει σε κάθε ομάδα και οδηγό. Ας αναλύσουμε πώς λειτουργεί:

### Τι Αντιπροσωπεύουν οι Τιμές Συγγένειας

Κάθε τιμή στον πίνακα "affinities" αντιστοιχεί σε μία ερώτηση του quiz, με την ίδια σειρά που εμφανίζονται οι ερωτήσεις. Οι τιμές κυμαίνονται από 0 έως 3 και αντιπροσωπεύουν ποια απάντηση από τις 4 πιθανές επιλογές είναι πιο κοντά στη φιλοσοφία/στυλ της συγκεκριμένης ομάδας ή οδηγού.

Για παράδειγμα:
- Τιμή 0: Αντιστοιχεί στην πρώτη επιλογή της ερώτησης
- Τιμή 1: Αντιστοιχεί στη δεύτερη επιλογή της ερώτησης
- Τιμή 2: Αντιστοιχεί στην τρίτη επιλογή της ερώτησης
- Τιμή 3: Αντιστοιχεί στην τέταρτη επιλογή της ερώτησης

### Παράδειγμα με Συγκεκριμένες Τιμές

Ας δούμε ένα παράδειγμα με την Mercedes:

```json
{
  "name": "Mercedes AMG Petronas",
  "affinities": [1, 2, 0, 3, 1, 1, 1, 2, 1, 2]
}
```

Αυτό σημαίνει:

1. Για την 1η ερώτηση: Η Mercedes έχει "συγγένεια" με τη 2η επιλογή (τιμή 1), που στο παράδειγμά μας είναι "Τεχνική καινοτομία"
2. Για τη 2η ερώτηση: Η Mercedes έχει "συγγένεια" με την 3η επιλογή (τιμή 2), που είναι "Ομαλό και συνεπές"
3. Και ούτω καθεξής...

### Αλγόριθμος Υπολογισμού Ταιριάσματος

Όταν ο χρήστης απαντά στις ερωτήσεις, οι απαντήσεις του αποθηκεύονται ως αριθμοί 0-3, όπου:
- 0 = επέλεξε την πρώτη επιλογή
- 1 = επέλεξε τη δεύτερη επιλογή
- 2 = επέλεξε την τρίτη επιλογή
- 3 = επέλεξε την τέταρτη επιλογή

Για να υπολογιστεί το συνολικό ποσοστό ταιριάσματος, ο αλγόριθμος ακολουθεί αυτά τα βήματα:

1. Για κάθε ερώτηση, συγκρίνει την απάντηση του χρήστη με την τιμή "συγγένειας" της ομάδας/οδηγού
2. Αν η απάντηση ταιριάζει ακριβώς, δίνονται 10 πόντοι
3. Αν η απάντηση δεν ταιριάζει ακριβώς, η βαθμολογία μειώνεται ανάλογα με την απόσταση μεταξύ των επιλογών
4. Η φόρμουλα που χρησιμοποιείται είναι: `10 - (Math.abs(απάντηση_χρήστη - συγγένεια_ομάδας) * 2)`
5. Αθροίζονται οι πόντοι από όλες τις ερωτήσεις
6. Το ποσοστό ταιριάσματος υπολογίζεται διαιρώντας τους συνολικούς πόντους με τη μέγιστη δυνατή βαθμολογία (αριθμός ερωτήσεων × 10)

### Συγκεκριμένο Παράδειγμα Υπολογισμού

Ας υποθέσουμε ότι ένας χρήστης απάντησε στις 10 ερωτήσεις και οι απαντήσεις του ήταν:
`[1, 2, 0, 3, 1, 2, 1, 2, 1, 2]`

Για την Mercedes με τιμές συγγένειας:
`[1, 2, 0, 3, 1, 1, 1, 2, 1, 2]`

Ο υπολογισμός θα είναι:

1. Ερώτηση 1: Απάντηση χρήστη = 1, Συγγένεια Mercedes = 1
   - Ακριβές ταίριασμα = 10 πόντοι
2. Ερώτηση 2: Απάντηση χρήστη = 2, Συγγένεια Mercedes = 2
   - Ακριβές ταίριασμα = 10 πόντοι
3. Ερώτηση 3: Απάντηση χρήστη = 0, Συγγένεια Mercedes = 0
   - Ακριβές ταίριασμα = 10 πόντοι
4. Ερώτηση 4: Απάντηση χρήστη = 3, Συγγένεια Mercedes = 3
   - Ακριβές ταίριασμα = 10 πόντοι
5. Ερώτηση 5: Απάντηση χρήστη = 1, Συγγένεια Mercedes = 1
   - Ακριβές ταίριασμα = 10 πόντοι
6. Ερώτηση 6: Απάντηση χρήστη = 2, Συγγένεια Mercedes = 1
   - Διαφορά = 1, Πόντοι = 10 - (1 * 2) = 8 πόντοι
7. Ερώτηση 7: Απάντηση χρήστη = 1, Συγγένεια Mercedes = 1
   - Ακριβές ταίριασμα = 10 πόντοι
8. Ερώτηση 8: Απάντηση χρήστη = 2, Συγγένεια Mercedes = 2
   - Ακριβές ταίριασμα = 10 πόντοι
9. Ερώτηση 9: Απάντηση χρήστη = 1, Συγγένεια Mercedes = 1
   - Ακριβές ταίριασμα = 10 πόντοι
10. Ερώτηση 10: Απάντηση χρήστη = 2, Συγγένεια Mercedes = 2
    - Ακριβές ταίριασμα = 10 πόντοι

Συνολική βαθμολογία για τη Mercedes: 10 + 10 + 10 + 10 + 10 + 8 + 10 + 10 + 10 + 10 = 98 πόντοι
Μέγιστη δυνατή βαθμολογία: 10 ερωτήσεις × 10 πόντοι = 100 πόντοι
Ποσοστό ταιριάσματος με τη Mercedes: 98 / 100 = 98%

### Πώς Επηρεάζουν οι Διαφορές στις Απαντήσεις

Όσο μεγαλύτερη είναι η διαφορά μεταξύ της απάντησης του χρήστη και της τιμής συγγένειας, τόσο λιγότεροι πόντοι δίνονται:

- Αν η διαφορά είναι 0 (απόλυτο ταίριασμα) = 10 πόντοι
- Αν η διαφορά είναι 1 = 8 πόντοι
- Αν η διαφορά είναι 2 = 6 πόντοι
- Αν η διαφορά είναι 3 (μέγιστη διαφορά) = 4 πόντοι

Αυτό σημαίνει ότι ακόμα και αν υπάρχουν κάποιες διαφορές, μια ομάδα ή οδηγός μπορεί να έχει υψηλό ποσοστό ταιριάσματος αν οι περισσότερες από τις άλλες απαντήσεις ταιριάζουν καλά.

## Ο Υπολογισμός του Γραφήματος Κατάταξης Οδηγών

Στη λειτουργία κατάταξης οδηγών (Driver Ranking), ο χρήστης ταξινομεί τους οδηγούς με βάση την προσωπική του εκτίμηση για την οδηγική τους ικανότητα. Το γράφημα που δημιουργείται μετά την υποβολή της κατάταξης χρησιμοποιεί έναν διαφορετικό αλγόριθμο:

1. Ο οδηγός στην κορυφή της κατάταξης (θέση #1) λαμβάνει 100 βαθμούς
2. Ο οδηγός στο τέλος της κατάταξης (θέση #20) λαμβάνει 5 βαθμούς
3. Οι υπόλοιποι οδηγοί λαμβάνουν βαθμούς κατανεμημένους ομοιόμορφα στο διάστημα 100-5

Ο τύπος υπολογισμού είναι:
```javascript
const maxScore = 100;
const minScore = 5;
const range = maxScore - minScore;
const scoreStep = range / (ranking.length - 1);
const scores = ranking.map((driver, index) => maxScore - (index * scoreStep));
```

Για παράδειγμα, με 20 οδηγούς, το βήμα είναι (100-5)/(20-1) = 5, άρα οι βαθμολογίες θα είναι:
- Θέση #1: 100 βαθμοί
- Θέση #2: 95 βαθμοί
- Θέση #3: 90 βαθμοί
- ...και ούτω καθεξής...
- Θέση #19: 10 βαθμοί
- Θέση #20: 5 βαθμοί

## Συμπέρασμα

Οι αλγόριθμοι υπολογισμού "συγγένειας" στο F1 Affinity Quiz είναι σχεδιασμένοι ώστε να αντικατοπτρίζουν πόσο κοντά είναι οι προτιμήσεις ενός χρήστη με το στυλ και τη φιλοσοφία των διαφόρων ομάδων και οδηγών της Formula 1. Αυτό επιτυγχάνεται μέσω ενός συστήματος βαθμολόγησης που συγκρίνει τις απαντήσεις του χρήστη με προκαθορισμένες τιμές "συγγένειας" για κάθε ομάδα/οδηγό.

Αυτό το σύστημα επιτρέπει στο quiz να παρέχει εξατομικευμένα αποτελέσματα που αντικατοπτρίζουν τις πραγματικές προτιμήσεις του χρήστη στον κόσμο της Formula 1.