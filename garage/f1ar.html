<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dynamic Anchor GPS-AR (Controls Bottom Right)</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body, html { margin:0; padding:0; overflow:hidden; }
    #controls {
      position: absolute;
      bottom: 1em;
      right: 1em;
      background: rgba(255,255,255,0.9);
      padding: 0.5em;
      border-radius: 4px;
      font-family: sans-serif;
      text-align: right;
    }
    #controls input { width: 5em; }
    #controls button { margin-left: 0.5em; }
  </style>
</head>
<body>

<div id="controls">
  <label>Lat: <input type="number" id="lat" step="0.000001" value="37.4219999"></label><br>
  <label>Lng: <input type="number" id="lng" step="0.000001" value="-122.0840575"></label><br>
  <button id="set">Ορισμός Αγκύρωσης</button>
  <button id="use-me">Χρήση της Θέσης μου</button>
</div>

<a-scene
        embedded
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; debugUIEnabled: false;"
>
  <a-entity
          id="car"
          gps-entity-place="latitude: 37.4219999; longitude: -122.0840575;"
          gltf-model="url(data/AudiF12026.glb)"
          scale="5 5 5"
          rotation="0 180 0">
  </a-entity>
  <a-entity camera></a-entity>
</a-scene>

<script>
  const car = document.getElementById('car');
  document.getElementById('set').onclick = () => {
    const lat = parseFloat(document.getElementById('lat').value);
    const lng = parseFloat(document.getElementById('lng').value);
    car.setAttribute('gps-entity-place',
            `latitude: ${lat}; longitude: ${lng};`
    );
    alert(`Η αγκύρωση ενημερώθηκε σε:\n${lat}, ${lng}`);
  };

  document.getElementById('use-me').onclick = () => {
    if (!navigator.geolocation) {
      return alert('Geolocation όχι υποστηριζόμενο');
    }
    navigator.geolocation.getCurrentPosition(pos => {
      const { latitude, longitude } = pos.coords;
      document.getElementById('lat').value = latitude.toFixed(6);
      document.getElementById('lng').value = longitude.toFixed(6);
      car.setAttribute('gps-entity-place',
              `latitude: ${latitude}; longitude: ${longitude};`
      );
      alert(`Χρήση της θέσης σας:\n${latitude}, ${longitude}`);
    }, err => alert('Αποτυχία ανάκτησης τοποθεσίας'));
  };
</script>
</body>
</html>
